{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container-fluid mt-4">
  <div class="row">

    <!-- Left Sidebar / Helper Menu -->
    <div class="col-md-3 col-lg-2 mb-3">
      <div class="card shadow-sm border-0 rounded-3">
        <div class="card-header bg-light text-center fw-semibold">
          <i class="bi bi-info-circle me-1"></i> Quick Help
        </div>
        <div class="list-group list-group-flush">

          <a href="{% url 'gene-set-list' %}" target="_blank" rel="noopener noreferrer"
             class="list-group-item list-group-item-action d-flex align-items-center">
            <i class="bi bi-diagram-3 me-2 text-primary"></i>
            <div>
              <strong>Gene sets</strong><br>
              <small class="text-muted">Browse available gene sets</small>
            </div>
          </a>

          <a href="{% url 'genomic-feature-list' %}" target="_blank" rel="noopener noreferrer"
             class="list-group-item list-group-item-action d-flex align-items-center">
            <i class="bi bi-graph-up me-2 text-info"></i>
            <div>
              <strong>Genomic tracks</strong><br>
              <small class="text-muted">Browse available genomic tracks</small>
            </div>
          </a>

          <a href="{% url 'reference-genome-list' %}" target="_blank" rel="noopener noreferrer"
             class="list-group-item list-group-item-action d-flex align-items-center">
            <i class="bi bi-database me-2 text-warning"></i>
            <div>
              <strong>Reference genomes</strong><br>
              <small class="text-muted">Browse available reference genomes</small>
            </div>
          </a>

          <a href="{% url 'documentation' %}" target="_blank" rel="noopener noreferrer"
             class="list-group-item list-group-item-action d-flex align-items-center">
            <i class="bi bi-journal-text me-2 text-secondary"></i>
            <div>
              <strong>Documentation</strong><br>
              <small class="text-muted">Read detailed module guide</small>
            </div>
          </a>

          <a href="mailto:jan.binkowski@pum.edu.pl"
             class="list-group-item list-group-item-action d-flex align-items-center">
            <i class="bi bi-envelope me-2 text-success"></i>
            <div>
              <strong>Support</strong><br>
              <small class="text-muted">jan.binkowski@pum.edu.pl</small>
            </div>
          </a>

        </div>
      </div>
    </div>

    <!-- Main Form Content -->
    <div class="col-md-9 col-lg-10">
      <div class="row justify-content-center">
        <div class="col-md-6">
          <div class="card shadow-sm rounded-4">

            <!-- Card Header -->
            <div class="card-header text-center">
              <h4>{{ form_name }}</h4>
            </div>

            <!-- Card Body -->
            <div class="card-body">
              <form method="post" enctype="multipart/form-data" id="submissionForm">
                {% csrf_token %}
                {{ form|crispy }}

                <!-- Submit Button -->
                <button id="submitBtn" type="submit" class="btn btn-outline-primary w-100 mt-3 d-flex align-items-center justify-content-center gap-2">
                  <span id="submitSpinner" class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                  <span id="submitText">Submit ></span>
                </button>
              </form>
            </div>

          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("submissionForm");
    const submitBtn = document.getElementById("submitBtn");
    const spinner = document.getElementById("submitSpinner");
    const text = document.getElementById("submitText");

    form.addEventListener("submit", function () {
        submitBtn.disabled = true;
        spinner.classList.remove("d-none");
        text.textContent = "Submitting...";
    });
});
</script>
{% endblock %}
